<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

    <!-- Basic Page Needs
  ================================================== -->
    <meta charset="utf-8">
    <title>zFanVideo | Free Video Html5 Templates</title>
    <meta name="description" content="Free Responsive Html5 Css3 Templates | zerotheme.com">
    <meta name="author" content="www.zerotheme.com">

    <!-- Mobile Specific Metas
  ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- CSS
  ================================================== -->
    <link rel="stylesheet" href="../static/css/zerogrid.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="../static/css/menu.css">
    <!-- Owl Carousel Assets -->
    <link href="../static/css/owl.carousel.css" rel="stylesheet">
    <link href="../static/css/owl.theme.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="../static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <script src="../static/js/plupload.full.min.js"></script>


    <!--[if lt IE 8]>
    <div style=' clear: both; text-align:center; position: relative;'>
        <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
            <img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." />
        </a>
    </div>
    <![endif]-->
    <!--[if lt IE 9]>
    <script src="js/html5.js"></script>
    <script src="js/css3-mediaqueries.js"></script>
    <![endif]-->

</head>
<body id="wrapper" >
<div class="wrap-body">

    <!--////////////////////////////////////Header-->
    <header>
        <div class="wrap-header">
            <div class="zerogrid">
                <div class="row">
                    <a href="index.html" class="logo"><img src="images/logo.png" /></a>
                    <ul class="quick-link">
                        <li><a href="#" title="Upload Video"><i class="fa fa-upload"></i></a></li>
                        <li><a href="#" title="Log in"><i class="fa fa-user"></i></a></li>
                        <li><a href="#" title="Warning"><i class="fa fa-bell"></i></a></li>
                    </ul>
                    <ul class="social">
                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                        <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                        <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="bottom">
            <div class="zerogrid">
                <div class="row">
                    <span>加入我们-点击<a href="contact.html">这里</a></span>
                </div>
            </div>
        </div>
    </header>
    <!--////////////////////////////////////Menu-->
    <a href="#" class="nav-toggle">Toggle Navigation</a>
    <nav class="cmn-tile-nav">
        <ul class="clearfix">
            <li class="colour-1"><a href="gallery.html">Top News</a></li>
            <li class="colour-2"><a href="gallery.html">Sport</a></li>
            <li class="colour-3"><a href="gallery.html">Music</a></li>
            <li class="colour-4"><a href="gallery.html">TV Show</a></li>
            <li class="colour-5"><a href="gallery.html">Cartoons</a></li>
            <li class="colour-6"><a href="gallery.html">Tech</a></li>
            <li class="colour-7"><a href="gallery.html">iOS</a></li>
            <li class="colour-8"><a href="gallery.html">More</a></li>
        </ul>
    </nav>
    <!--////////////////////////////////////Container-->
    <section id="container" class="index-page">
        <div class="wrap-container zerogrid">
            <div class="row">
                <div id="main-content" class="col-2-3">
                    <div class="contact">
                        <h2>投稿</h2>
                        <div id="contact_form">
                            <form name="form1" id="ff" method="post" action="/contribute/addContribution">
                                <label>
                                    <span>主题:</span>
                                    <input type="text"  name="title" id="title" required>
                                </label>
                                <label>
                                    <span>投稿类型:</span>
                                    <select name="type" id="type" class="form-select-button" required>
                                        <option value="0">请选择...</option>
                                        <option value="1">音乐</option>
                                        <option value="2">运动</option>
                                        <option value="3">鬼畜</option>
                                        <option value="4">动漫</option>
                                        <option value="5">美食</option>
                                    </select>
                                </label>
                                <label>
                                    <label>主题封面：</label>
                                    <button class="btn new_btn-w-m btn-primary" href="#" id="index_image" name="index_image">上传海报
                                        <span id="Progress2" style=" opacity: 0.6;z-index:10; position: absolute; bottom: 0; left: 0; height: 100%; width: 0%; display: block; background-color: #003399"></span>
                                    </button>
                                    <input type="text" name="image_url" id="image_url" style="display: none">
                                    <input type="text" name="imageFieldId" id="imageFieldId" style="display: none">
                                    <span>支持jpg、jpeg、png、gif格式，大小不超过2M</span>
                                    <img id="sample" src="" style="margin-top: 10px;max-width: 400px;width: 100%;">
                                    <p class="showInfo"></p>
                                </label>
                                <label>
                                    <label>上传视频：</label>
                                    <button class="btn new_btn-w-m btn-primary" href="#" id="video_upload_btn">上传视频
                                        <span id="Progress" style=" opacity: 0.6;z-index:10; position: absolute; bottom: 0; left: 0; height: 100%; width: 0%; display: block; background-color: #003399"></span>
                                    </button>
                                    <input type="text" name="video_url" id="video_url" style="display: none">
                                    <input type="text" name="videoFieldId" id="videoFieldId" style="display: none">
                                    <span class="color-gray">支持AVI、wma、rmvb、rm、flash、mp4、mid、3GP等格式</span>
                                    <video controls='controls' style="margin-top: 10px;max-width: 400px;width: 100%;">
                                        <source src="" type='video/mp4' id="video">
                                    </video>
                                </label>
                                <p class="showInfo"></p>

                                <center><input class="sendButton" type="submit" name="Submit" value="投稿"></center>
                            </form>
                        </div>
                    </div>
                </div>
                <div id="sidebar" class="col-1-3">
                    <form id="form-container" action="">
                        <!--<input type="submit" id="searchsubmit" value="" />-->
                        <a class="search-submit-button" href="javascript:void(0)">
                            <i class="fa fa-search"></i>
                        </a>
                        <div id="searchtext">
                            <input type="text" id="s" name="s" placeholder="Search Something...">
                        </div>
                    </form>
                    <!---- Start Widget ---->
                    <div class="widget wid-post">
                        <div class="wid-header">
                            <h5>Latest Posts</h5>
                        </div>
                        <div class="wid-content">
                            <div class="post wrap-vid">
                                <div class="zoom-container">
                                    <a href="single.html">
										<span class="zoom-caption">
											<i class="icon-play fa fa-play"></i>
										</span>
                                        <img src="images/4.jpg" />
                                    </a>
                                </div>
                                <div class="wrapper">
                                    <h5 class="vid-name"><a href="#">Video's Name</a></h5>
                                    <div class="info">
                                        <h6>By <a href="#">Kelvin</a></h6>
                                        <span><i class="fa fa-calendar"></i>25/3/2015</span>
                                        <span><i class="fa fa-heart"></i>1,200</span>
                                    </div>
                                </div>
                            </div>
                            <div class="post wrap-vid">
                                <div class="zoom-container">
                                    <a href="single.html">
										<span class="zoom-caption">
											<i class="icon-play fa fa-play"></i>
										</span>
                                        <img src="images/14.jpg" />
                                    </a>
                                </div>
                                <div class="wrapper">
                                    <h5 class="vid-name"><a href="#">Video's Name</a></h5>
                                    <div class="info">
                                        <h6>By <a href="#">Kelvin</a></h6>
                                        <span><i class="fa fa-calendar"></i>25/3/2015</span>
                                        <span><i class="fa fa-heart"></i>1,200</span>
                                    </div>
                                </div>
                            </div>
                            <div class="post wrap-vid">
                                <div class="zoom-container">
                                    <a href="single.html">
										<span class="zoom-caption">
											<i class="icon-play fa fa-play"></i>
										</span>
                                        <img src="images/3.jpg" />
                                    </a>
                                </div>
                                <div class="wrapper">
                                    <h5 class="vid-name"><a href="#">Video's Name</a></h5>
                                    <div class="info">
                                        <h6>By <a href="#">Kelvin</a></h6>
                                        <span><i class="fa fa-calendar"></i>25/3/2015</span>
                                        <span><i class="fa fa-heart"></i>1,200</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!---- Start Widget ---->
                    <div class="widget wid-news">
                        <div class="wid-header">
                            <h5>Top News</h5>
                        </div>
                        <div class="wid-content">
                            <div class="row">
                                <div class="wrap-vid">
                                    <div class="zoom-container">
                                        <a href="single.html">
											<span class="zoom-caption">
												<i class="icon-play fa fa-play"></i>
											</span>
                                            <img src="images/1.jpg" />
                                        </a>
                                    </div>
                                    <h3 class="vid-name">Video's Name</h3>
                                    <div class="info">
                                        <h5>By <a href="#">Kelvin</a></h5>
                                        <span><i class="fa fa-calendar"></i>25/3/2015</span>
                                        <span><i class="fa fa-heart"></i>1,200</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="wrap-vid">
                                    <div class="zoom-container">
                                        <a href="single.html">
											<span class="zoom-caption">
												<i class="icon-play fa fa-play"></i>
											</span>
                                            <img src="images/2.jpg" />
                                        </a>
                                    </div>
                                    <h3 class="vid-name">Video's Name</h3>
                                    <div class="info">
                                        <h5>By <a href="#">Kelvin</a></h5>
                                        <span><i class="fa fa-calendar"></i>25/3/2015</span>
                                        <span><i class="fa fa-heart"></i>1,200</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="wrap-vid">
                                    <div class="zoom-container">
                                        <a href="single.html">
											<span class="zoom-caption">
												<i class="icon-play fa fa-play"></i>
											</span>
                                            <img src="images/4.jpg" />
                                        </a>
                                    </div>
                                    <h3 class="vid-name">Video's Name</h3>
                                    <div class="info">
                                        <h5>By <a href="#">Kelvin</a></h5>
                                        <span><i class="fa fa-calendar"></i>25/3/2015</span>
                                        <span><i class="fa fa-heart"></i>1,200</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--////////////////////////////////////Footer-->
    <footer>
        <div class="zerogrid top-footer">
            <div class="row">
                <div class="col-1-5">
                    <a href="#"><img src="images/15.jpg" /></a>
                </div>
                <div class="col-1-5">
                    <a href="#"><img src="images/16.jpg" /></a>
                </div>
                <div class="col-1-5">
                    <a href="#"><img src="images/17.jpg" /></a>
                </div>
                <div class="col-1-5">
                    <a href="#"><img src="images/18.jpg" /></a>
                </div>
                <div class="col-1-5">
                    <a href="#"><img src="images/19.jpg" /></a>
                </div>
            </div>
        </div>
        <div class="zerogrid wrap-footer">
            <div class="row">
                <div class="col-1-4 col-footer-1">
                    <div class="wrap-col">
                        <a href="index.html" class="logo"><img src="images/logo.png" /></a>
                        <p>Ut volutpat consectetur aliquam. Curabitur auctor in nis ulum ornare. Sed consequat, augue condimentum fermentum gravida, metus elit vehicula dui.</p>
                    </div>
                </div>
                <div class="col-1-4 col-footer-2">
                    <div class="wrap-col">
                        <h3>Categories</h3>
                        <ul>
                            <li><a href="#">Action</a></li>
                            <li><a href="#">Romantic</a></li>
                            <li><a href="#">Cartoon</a></li>
                            <li><a href="#">Zombies</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-1-4 col-footer-3">
                    <div class="wrap-col">
                        <h3>Recent Posts</h3>
                        <ul>
                            <li><a href="#">New Videos</a></li>
                            <li><a href="#">Featured Videos</a></li>
                            <li><a href="#">Most Viewed Videos</a></li>
                            <li><a href="#">Sports Videos</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-1-4 col-footer-4">
                    <div class="wrap-col">
                        <h3>Flickr Photos</h3>
                        <div class="row">
                            <div class="col-1-4">
                                <div class="wrap-col">
                                    <a href="#"><img src="images/6.jpg" /></a>
                                    <a href="#"><img src="images/10.jpg" /></a>
                                    <a href="#"><img src="images/13.jpg" /></a>
                                </div>
                            </div>
                            <div class="col-1-4">
                                <div class="wrap-col">
                                    <a href="#"><img src="images/7.jpg" /></a>
                                    <a href="#"><img src="images/11.jpg" /></a>
                                    <a href="#"><img src="images/6.jpg" /></a>
                                </div>
                            </div>
                            <div class="col-1-4">
                                <div class="wrap-col">
                                    <a href="#"><img src="images/8.jpg" /></a>
                                    <a href="#"><img src="images/12.jpg" /></a>
                                    <a href="#"><img src="images/10.jpg" /></a>
                                </div>
                            </div>
                            <div class="col-1-4">
                                <div class="wrap-col">
                                    <a href="#"><img src="images/9.jpg" /></a>
                                    <a href="#"><img src="images/13.jpg" /></a>
                                    <a href="#"><img src="images/8.jpg" /></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="zerogrid copyright">
            <div class="wrapper">
                Copyright 2015 - More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a>
                <ul class="quick-link f-right">
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Use</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <!-- Slider -->
    <script src="../static/js/jquery-2.1.1.js"></script>
    <script src="../static/js/demo.js"></script>
    <!-- Search -->
    <script src="js/modernizr.custom.js"></script>
    <script src="../static/js/classie.js"></script>
    <script src="js/uisearch.js"></script>
    <script>
        //new UISearch( document.getElementById( 'sb-search' ) );
    </script>
    <!-- Carousel -->
    <script src="../static/js/owl.carousel.js"></script>
    <script>
        $(document).ready(function() {

            $("#owl-demo-1").owlCarousel({
                items : 4,
                lazyLoad : true,
                navigation : true
            });
            $("#owl-demo-2").owlCarousel({
                items : 4,
                lazyLoad : true,
                navigation : true
            });

        });

        $(function () {
            var uploader_image = new plupload.Uploader({
                browse_button: 'index_image',
                url: "/upload/uploadImagie?path=video_img",
                filters: {
                    max_file_size : '4mb',//最大上传文件大小（格式100b, 10kb, 10mb, 1gb）
                    prevent_duplicates : true,
                    mime_types: [//允许文件上传类型
                        {title: "files", extensions: "jpg,png,gif,jpeg"}
                    ]
                },
                multipart_params: {
                    '_xsrf': $("input[name='_xsrf']").val()
                },
                init:{
                    FilesAdded:function(up, files) {
                        var reader = new FileReader();
                        reader.readAsDataURL(files[0].getNative());
                        reader.onload = (function (e) {
                            var image = new Image();
                            image.src = e.target.result;
                            image.onload = function () {
                                var rate = this.width/this.height;
                                if (rate>1.7 && rate<1.8) {
                                    uploader_image.start();
                                } else {
                                    alert('尺寸比例不符');
                                    //console.log('尺寸比例不符');
                                }
                            };
                        });
                        // plupload.each(files, function (file) {
                        //     uploader_image.start();
                        // });
                    },
                    UploadProgress: function(up, file) { //上传中，显示进度条
                        $('#Progress2').css('width', file.percent+'%');
                    },
                    FileUploaded:function(up, file, info) {
                        //var base = '/static/media/video_img/';
                        var response = $.parseJSON(info.response);
                        if (response.status == 'success') {
                            $("#sample").show().attr("src", response.url);
                            $("#image_url").val(response.url);
                            $("#imageFieldId").val(response.imageFieldId);
                        }
                        else {
                            alert(response.error);
                        }
                    },
                    Error:function(up, errObject) {
                        alert(errObject.code+errObject.message);
                    },
                }
            });
            uploader_image.init();
        var uploader_video = new plupload.Uploader({//创建实例的构造方法
            runtimes: 'gears,html5,html4,silverlight,flash', //上传插件初始化选用那种方式的优先级顺序
            browse_button: ['video_upload_btn'], // 上传按钮
            url: "upload/uploadVideo?path=vidieos", //远程上传地址
            // flash_swf_url: 'js/plugins/plupload/Moxie.swf', //flash文件地址
            // silverlight_xap_url: 'js/plugins/plupload/Moxie.xap', //silverlight文件地址
            filters: {
                max_file_size: '1gb', //最大上传文件大小（格式100b, 10kb, 10mb, 1gb）
                mime_types: [//允许文件上传类型
                    {title: "files", extensions: "mpg,m4v,mp4,flv,3gp,mov,avi,rmvb,mkv,wmv"}
                ]
            },
            multipart_params: {
                '_xsrf': $("input[name='_xsrf']").val()
            },
            //       chunk_size: "5mb", //分片上传文件时，每片文件被切割成的大小，为数字时单位为字节。也可以使用一个带单位的字符串，如"200kb"。当该值为0时表示不使用分片上传功能
            multi_selection: false, //true:ctrl多文件上传, false 单文件上传
            init: {
                FilesAdded: function(up, files) { //文件上传前
                    plupload.each(files, function (file) {
                        uploader_video.start();
                    });
                },
                UploadProgress: function(up, file) { //上传中，显示进度条
                    $('#Progress').css('width', file.percent+'%');
                },
                FileUploaded: function(up, file, info) { //文件上传成功的时候触发
                    //var base = '/static/media/videos/';
                    var response = $.parseJSON(info.response);
                    if (response.status == 'success') {
                        var url = response.url;
                        $("#video").show().attr("src", url);
                        // console.log($("#video").parent());
                        $("#video").parent().get(0).load();
                        $("#video_url").val(url);
                        $("#videoFieldId").val(response.videoFieldId);
                    }
                    else if(response.status == 'failed'){
                        alert(response.msg);
                    }
                    else {
                        alert("上传失败！！！");
                    }
                },
                Error: function(up, errObject) { //上传出错的时候触发
                    alert(errObject.code+errObject.message);
                }
            }
        });
        uploader_video.init();
        });

    </script>
</div>
</body></html>